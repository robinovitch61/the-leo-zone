<!doctype html><html lang=en><head><meta charset=utf-8><title>Leo Robinovitch @ The Leo Zone</title><link rel=icon href=/img/favicon.png type=image/x-icon><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The personal site of Leo Robinovitch, an American & Canadian Software Engineer in the Bay Area."><link rel=stylesheet href=/sass/main.min.37cae268a832be7b4f8f4f09017287a11172816cd0d0261525bb6b9f8c55f343.css><link rel=stylesheet href=/sass/header.min.d9e6b99fbc69ba1975d9543623d513c8532495059279cc57a58f8065ae953c91.css><link rel=stylesheet href=/sass/footer.min.eaac730dad5c96ec74b1b6ad615c2653058b703041364f7f2f29ffe0deb6b650.css><a rel=me href=https://recurse.social/@robinovitch61></a></head><body><header><div class=header-content><a href=/><div class=logo>THE LEO ZONE</div></a><div class=stripes><div class="stripe top"></div><div class="stripe middle"></div><div class="stripe bottom"></div></div><a href=/><div class=sun><div class=stripes></div></div></a><div class=nav><a href=/ target=_self>home</a>
<a href=https://github.com/robinovitch61 target=_blank>github</a>
<a href=/about target=_self>about</a></div></div></header><div class=content><div class=container><h1>setting up tidal cycles</h1><div class=post-date><p>Mar 25, 2022</p></div><div class=post><p><a href=https://tidalcycles.org/>Tidal Cycles</a> is software that works on top of another piece of software called
<a href=https://supercollider.github.io/>SuperCollider</a>.</p><p>Together, you can use them to produce music using code.</p><p>Today I set up these tools and made my first sound with them. Setup was a bit tricky, and this post is as much for
myself to document what I did as it is for others pursuing their own setup in the future.</p><p>The first step is to install SuperCollider, following the install links for your platform
at <a href=https://supercollider.github.io/>supercollider.github.io</a>.</p><p>SuperCollider is a super cool tool in and of itself, featuring a fully formed object-oriented language with which to
generate, template, pattern and mix sounds.</p><p>Tidal Cycles features a completely different language, though: a domain-specific language in Haskell. In order to set up
Tidal Cycles, you don&rsquo;t need to learn any of the native SuperCollider language or do any of the tutorials offered on
startup.</p><p>Once SuperCollider is installed, Tidal Cycles requires installation of some other dependencies. They offer good setup
instructions for each platform <a href=https://tidalcycles.org/docs/getting-started/macos_install>here</a>
(link leads to MacOS instructions, but other platforms are in the sidebar).</p><p>These dependencies include:</p><ul><li>SuperCollider: already installed above</li><li>SuperDirt: a SuperCollider sampler designed for Tidal Cycles</li><li>Atom Editor with Tidal Cycles plugin: optional (I uninstall it and don&rsquo;t use it in the final setup, but good for
testing)</li><li>Haskell</li><li>The <code>tidal</code> Haskell package</li></ul><p>A good explanation for how these components
interact (<a href=https://tidalcycles.org/docs/getting-started/tidal_start>source</a>):</p><a class=img-link target=_blank href=/img/tidal.jpg><figure><img style=max-width:90% src=/img/tidal.jpg alt=tidal.jpg></figure></a><p>To test things are working:</p><ol><li><p>Open SuperCollider.</p></li><li><p>Paste in the left editor box <code>SuperDirt.start;</code>.</p></li><li><p>Run it by hitting Shift-Enter with your cursor on the same line. You should see output in the bottom right like:</p></li></ol><pre tabindex=0><code>SuperDirt: listening to Tidal on port 57120
</code></pre><ol start=4><li><p>Keeping SuperCollider and SuperDirt open and running, open Atom. Confirm Tidal Cycles plugin is installed (visible on
the bottom right).</p></li><li><p>Create a new file called <code>test.tidal</code></p></li><li><p>Add the line <code>d1 $ sound "bd sd"</code></p></li><li><p>Type ctrl-Enter or cmd-Enter with your cursor on the same line. A beat should play!</p></li></ol><p>Now this is the stock setup working. I changed mine a bit for convenience, but if you&rsquo;d like to you can stop here
and proceed with actually using the software to make music :).</p><p>After this confirmation things were installed and working, I uninstalled Atom, as it&rsquo;s not an editor I use regularly.
I&rsquo;m a fan of <code>vim</code>.</p><p>I then went to SuperCollider and configured it to start up SuperDirt whenever it is first opened. I did this by clicking
<code>File -> Open startup file</code>, pasting in the following text, and saving the startup file:</p><pre tabindex=0><code>/*
This is an example startup file. You can load it from your startup file
(to be found in Platform.userAppSupportDir +/+ &#34;startup.scd&#34;)
*/

(
s.reboot { // server options are only updated on reboot
    // configure the sound server: here you could add hardware specific options
    // see http://doc.sccode.org/Classes/ServerOptions.html
    s.options.numBuffers = 1024 * 256; // increase this if you need to load more samples
    s.options.memSize = 8192 * 32; // increase this if you get &#34;alloc failed&#34; messages
    s.options.numWireBufs = 64; // increase this if you get &#34;exceeded number of interconnect buffers&#34; messages 
    s.options.maxNodes = 1024 * 32; // increase this if you are getting drop outs and the message &#34;too many nodes&#34;
    s.options.numOutputBusChannels = 2; // set this to your hardware output channel size, if necessary
    s.options.numInputBusChannels = 2; // set this to your hardware output channel size, if necessary
    // boot the server and start SuperDirt
    s.waitForBoot {
        ~dirt = SuperDirt(2, s); // two output channels, increase if you want to pan across more channels
        ~dirt.loadSoundFiles;   // load samples (path containing a wildcard can be passed in)
        // for example: ~dirt.loadSoundFiles(&#34;/Users/myUserName/Dirt/samples/*&#34;);
        // s.sync; // optionally: wait for samples to be read
        ~dirt.start(57120, 0 ! 12);   // start listening on port 57120, create two busses each sending audio to channel 0

        // optional, needed for convenient access from sclang:
        (
            ~d1 = ~dirt.orbits[0]; ~d2 = ~dirt.orbits[1]; ~d3 = ~dirt.orbits[2];
            ~d4 = ~dirt.orbits[3]; ~d5 = ~dirt.orbits[4]; ~d6 = ~dirt.orbits[5];
            ~d7 = ~dirt.orbits[6]; ~d8 = ~dirt.orbits[7]; ~d9 = ~dirt.orbits[8];
            ~d10 = ~dirt.orbits[9]; ~d11 = ~dirt.orbits[10]; ~d12 = ~dirt.orbits[11];
        );
    };

    s.latency = 0.3; // increase this if you get &#34;late&#34; messages
};
);
</code></pre><p>I then aliased <code>sclang</code> to the installed script in my shell startup file (<code>~/.zshrc</code>). This may or may not be required
depending on your platform.</p><pre tabindex=0><code>alias sclang=&#34;/Applications/SuperCollider.app/Contents/MacOS/sclang&#34;
</code></pre><p>In order to use <code>vim</code> with Tidal Cycles, I installed <a href=https://github.com/tidalcycles/vim-tidal>vim-tidal</a>. Make sure
you run the <code>make</code> command to symlink the <code>tidalvim</code> and <code>tidal</code> scripts as recommended so that you can run <code>tidal</code>
in a terminal.</p><p>I then created a new <a href=https://github.com/tmuxinator/tmuxinator>tmuxinator</a> project called <code>music</code> with the following
configuration:</p><pre tabindex=0><code># /Users/leo/.config/tmuxinator/music.yml

name: music
socket_name: music
root: ~/projects/music

windows:
  - editor:
      panes:
        - vim
  - server:
      panes:
        - sclang
        - tidal
</code></pre><p>This allows me to run <code>tmuxinator start music</code> and 2 windows open up:</p><ul><li>a main window for vim</li><li>a hidden split window running <code>sclang</code>, a &ldquo;headless&rdquo; version of SuperCollider, and <code>tidal</code>, the vim-tidal plugin
script that starts the Haskell interpreter including the tidal package</li></ul><p>Finally, by adding the following configuration line to my <code>~/.vimrc</code>, I configure vim-tidal to send commands to the
correct tmux socket and window + pane (the <code>tidal</code> pane):</p><pre tabindex=0><code>&#34; vim-tidal combined with tmuxinator music
let g:tidal_default_config = {&#34;socket_name&#34;: &#34;music&#34;, &#34;target_pane&#34;: &#34;music:2.2&#34;}
</code></pre><p>Now, I can fire up <code>vim</code> configured with SuperCollider and Tidal Cycles running with <code>tmuxinator start music</code>. When I&rsquo;m
done, I save my files and run <code>tmuxinator stop music</code>, and everything shuts down.</p></div></div></div><footer><div class=nav><a href=/ target=_self>home</a></div><div class=woopsy>measure twice, cut once</div></footer></body></html>