<!doctype html><html lang=en><head><meta charset=utf-8><title>color commentary</title><link rel=icon href=/img/favicon.png type=image/x-icon><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/sass/main.min.cb73aa14a324095235124a8ed761b206e1c2f5ad5b41ad79ec492968829f03ff.css><link rel=stylesheet href=/sass/header.min.2d173d9ef20ce2751561a5715ed28d18e861ccfbcb63c2da7d3bf082225b860a.css></head><body><header><div class=header-content><a href=/><div class=logo>THE LEO ZONE</div></a><div class=stripes><div class="stripe top"></div><div class="stripe middle"></div><div class="stripe bottom"></div></div><a href=/><div class=sun><div class=stripes></div></div></a><div class=nav><div class=folder><a href=https://github.com/robinovitch61 target=_blank><div class=svg-container><div class=text>github</div><svg width="100%" height="100%" viewBox="0 0 62 39" xmlns="http://www.w3.org/2000/svg">style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"><g transform="matrix(1,0,0,1,-430.298,-160.148)"><g transform="matrix(1,0,0,1,-1300.35,76.8871)"><path d="M1731.65 92.982s0-4.099.0-6.676C1731.65 85.763 1731.87 85.244 1732.25 84.86 1732.63 84.477 1733.15 84.261 1733.69 84.261c4.8599999999999.0 16.7.0 16.7.0L1756.75 88.872 1750.42 92.982h-18.77z" style="fill:#5c5c5c;stroke:#c2c2c2;stroke-width:2px"/></g><g transform="matrix(1,0,0,1,-1300.35,76.3854)"><path d="M1756.75 89.374 1750.42 93.483h-18.77v25.786C1731.65 119.8 1731.86 120.308 1732.24 120.683 1732.61 121.058 1733.12 121.269 1733.65 121.269 1742.75 121.269 1780.2 121.269 1789.3 121.269 1789.83 121.269 1790.34 121.058 1790.72 120.683 1791.09 120.308 1791.3 119.8 1791.3 119.269c0-5.727.0-22.147.0-27.873.0-1.104-.889999999999873-1.999-2-2C1781.94 89.391 1756.75 89.374 1756.75 89.374z" style="fill:none;stroke:#c2c2c2;stroke-width:2px"/></g></g></svg></div></a></div><div class=folder><a href=/about target=_self><div class=svg-container><div class=text>about</div><svg width="100%" height="100%" viewBox="0 0 62 39" xmlns="http://www.w3.org/2000/svg">style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"><g transform="matrix(1,0,0,1,-430.298,-160.148)"><g transform="matrix(1,0,0,1,-1300.35,76.8871)"><path d="M1731.65 92.982s0-4.099.0-6.676C1731.65 85.763 1731.87 85.244 1732.25 84.86 1732.63 84.477 1733.15 84.261 1733.69 84.261c4.8599999999999.0 16.7.0 16.7.0L1756.75 88.872 1750.42 92.982h-18.77z" style="fill:#5c5c5c;stroke:#c2c2c2;stroke-width:2px"/></g><g transform="matrix(1,0,0,1,-1300.35,76.3854)"><path d="M1756.75 89.374 1750.42 93.483h-18.77v25.786C1731.65 119.8 1731.86 120.308 1732.24 120.683 1732.61 121.058 1733.12 121.269 1733.65 121.269 1742.75 121.269 1780.2 121.269 1789.3 121.269 1789.83 121.269 1790.34 121.058 1790.72 120.683 1791.09 120.308 1791.3 119.8 1791.3 119.269c0-5.727.0-22.147.0-27.873.0-1.104-.889999999999873-1.999-2-2C1781.94 89.391 1756.75 89.374 1756.75 89.374z" style="fill:none;stroke:#c2c2c2;stroke-width:2px"/></g></g></svg></div></a></div><div class=folder><a href=https://www.bing.com/ target=_blank><div class=svg-container><div class=text>help</div><svg width="100%" height="100%" viewBox="0 0 62 39" xmlns="http://www.w3.org/2000/svg">style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"><g transform="matrix(1,0,0,1,-430.298,-160.148)"><g transform="matrix(1,0,0,1,-1300.35,76.8871)"><path d="M1731.65 92.982s0-4.099.0-6.676C1731.65 85.763 1731.87 85.244 1732.25 84.86 1732.63 84.477 1733.15 84.261 1733.69 84.261c4.8599999999999.0 16.7.0 16.7.0L1756.75 88.872 1750.42 92.982h-18.77z" style="fill:#5c5c5c;stroke:#c2c2c2;stroke-width:2px"/></g><g transform="matrix(1,0,0,1,-1300.35,76.3854)"><path d="M1756.75 89.374 1750.42 93.483h-18.77v25.786C1731.65 119.8 1731.86 120.308 1732.24 120.683 1732.61 121.058 1733.12 121.269 1733.65 121.269 1742.75 121.269 1780.2 121.269 1789.3 121.269 1789.83 121.269 1790.34 121.058 1790.72 120.683 1791.09 120.308 1791.3 119.8 1791.3 119.269c0-5.727.0-22.147.0-27.873.0-1.104-.889999999999873-1.999-2-2C1781.94 89.391 1756.75 89.374 1756.75 89.374z" style="fill:none;stroke:#c2c2c2;stroke-width:2px"/></g></g></svg></div></a></div></div></div></header><div class=container><h2>color commentary</h2></div><div class=post-date><div class=container><p>Nov 09, 2020</p></div></div><div class=container><div class=post><a class=img-link target=_blank href=/img/cc_collage.png><figure><img style=max-width:120% src=/img/cc_collage.png alt=cc_collage.png><figcaption class=figcaption-text>Twitter bird - blue or purple?</figcaption></figure></a><p>About 6 weeks ago, I launched <a href=https://colorcontroversy.com>colorcontroversy.com</a>. Since then, the site has collected over 800,000 color judgements and been shared around the web more than I expected.</p><p>A much-simplified version of Randal Monroe of XKCD&rsquo;s <a href=https://blog.xkcd.com/2010/05/03/color-survey-results/>color survey</a>, the site shows you a color shade and presents two color choices for that shade. For example, it shows you a <span style=color:#00878e>dark turquoise</span> and asks you if it&rsquo;s <span style=color:#32cd32>Green</span> or <span style=color:#547cff>Blue</span>. Then it shows you what other people thought it was.</p><a class=img-link target=_blank href=/img/turquoise-result.png><figure><img style=max-width:70% src=/img/turquoise-result.png alt=turquoise-result.png></figure></a><p>This the first thing I&rsquo;ve put out there that I wanted lots of random people to use and enjoy. I learned a lot from building it, some of which is discussed below.</p><h2 id=dont-design-in-htmlcss>don&rsquo;t design in html/css</h2><p>Unless you&rsquo;re <a href=https://lynnandtonic.com/>Lynn Fisher</a>, it can be pretty difficult to translate designs from your head immediately into code. This is obvious to any designer or artistic person, but these things I am not.</p><a class=img-link target=_blank href=/img/figma-cc-mobile.png><figure><img style=max-width:70% src=/img/figma-cc-mobile.png alt=figma-cc-mobile.png><figcaption class=figcaption-text>Note the original skull logo</figcaption></figure></a><p>Turns out clicking and dragging is a lot easier than CSS when in ideation. The mocks were mostly done before I wrote a line of code. I was able to get feedback from friends on a real-looking site without any serious up-front investment.</p><h2 id=sign-up-isnt-just-for-data-collection>sign up isn&rsquo;t just for data collection</h2><p>The things that take my breath away on the internet almost always load and immerse quickly. A <a href=https://paveldogreat.github.io/WebGL-Fluid-Simulation/>fluid simulation</a> or a <a href=https://www.pixelthoughts.co/>peaceful meditation</a> - no sign up flow, no pop ups or ads, no cookie consent required, nothing between you and the experience.</p><p>Notably, the examples above deliver the entire content to the users&rsquo; browser up front, then no further interaction with the internet is required.</p><p>Color Controversy does not behave this way. It collects repeated user input and persists it in a far-away server. So what if someone wants to spam the site with repeated requests from an automated script? What if someone wants to DDoS the site just for the LuLz?</p><p>A h4ck3r would have nothing to gain from doing this, but I felt I should operate in the &ldquo;whatever users can do, they will do&rdquo; mindset. I could have embedded a unique token in the browser that the user would automatically include in their data submission when operating the site as intended, but how to obtain the token in a way some script couldn&rsquo;t reproduce fairly easily?</p><p>When it comes down to it, deterrence for malicious action is limited without user-specific identification, i.e. sign up and login. Turns out there&rsquo;s more to sign up than just pernicious data collection for profit!</p><p>Sign up and login were a deal breaker for me user-experience wise, so what I settled for was implementing server-side <a href=https://github.com/robinovitch61/color-controversy/blob/master/backups/backup.sh>periodic backups of the database</a> with the knowledge that I could at least restore the data to a valid state if someone did decide to mess with it. Luckily, this hasn&rsquo;t been necessary so far.</p><h2 id=done-is-better-than-perfect>done is better than perfect</h2><p>Could I have worked harder to figure out how to get the play-swagger plugin to parse my Enum color values so I wouldn&rsquo;t have to replicate them manually on the frontend? Yes.</p><p>Is the color label text sometimes a little cut off on color labels on the results chart when the color is medium-controversial? Yes.</p><p>Are two different docker-compose files, one for dev and one for prod, the best way to do something resembling dev ops? Could I have pushed my built images to remote storage to avoid rebuilding them locally every time? Could I have figured out how to get my Scala Play container to compile and run on less RAM and saved a few dollars a month on AWS costs? Yes, yes, and yes.</p><p>But it&rsquo;s done! It works! People use it, and no one has submitted angry github issues denigrating my intelligence. In fact, I got my <a href=https://github.com/robinovitch61/color-controversy>first 3 github stars</a> on the project! I love it as is and am ready to move on.</p><h2 id=design-data-collection-early>design data collection early</h2><p>I did something really smart and/or really dumb in designing the data model for Color Controversy.</p><p>I decided that the database would never grow past its <a href=https://github.com/robinovitch61/color-controversy/blob/master/postgres/init.sql>original number of rows</a> - color submissions simply trigger a SQL query that mutates one of the values in the row of that color:</p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:green;font-weight:700>UPDATE</span><span style=color:#bbb> </span>color<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>SET</span><span style=color:#bbb>    </span>n_first<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>CASE</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>WHEN</span><span style=color:#bbb> </span>(color.hex<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#ba2121>&#39;${hexColor}&#39;</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>AND</span><span style=color:#bbb> </span>color.first_option<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#ba2121>&#39;${choice}&#39;</span>)<span style=color:#bbb> </span><span style=color:green;font-weight:700>THEN</span><span style=color:#bbb> </span>n_first<span style=color:#bbb> </span><span style=color:#666>+</span><span style=color:#bbb> </span><span style=color:#666>1</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>ELSE</span><span style=color:#bbb> </span>n_first<span style=color:#bbb> </span><span style=color:green;font-weight:700>END</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>     </span>,<span style=color:#bbb> </span>n_second<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>CASE</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>WHEN</span><span style=color:#bbb> </span>(color.hex<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#ba2121>&#39;${hexColor}&#39;</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>AND</span><span style=color:#bbb> </span>color.second_option<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#ba2121>&#39;${choice}&#39;</span>)<span style=color:#bbb> </span><span style=color:green;font-weight:700>THEN</span><span style=color:#bbb> </span>n_second<span style=color:#bbb> </span><span style=color:#666>+</span><span style=color:#bbb> </span><span style=color:#666>1</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>ELSE</span><span style=color:#bbb> </span>n_second<span style=color:#bbb> </span><span style=color:green;font-weight:700>END</span><span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><p>I know Postgres will handle this atomically and liked the idea of a database that was basically the same size no matter how large the traffic grew. No indexing or normalization required when you only have ~100 rows of data ðŸ˜Ž.</p><p>Unfortunately, someone online pointed out soon after launch that it would have made for some interesting data to collect a little more than just color judgements. Browser usage, mobile/tablet/desktop, general location and time of day along with judgement made makes for some interesting data analysis after the fact.</p><p>Fortunately, completely by accident, I can pretty much parse all this out of the Nginx logs, which I started backing up periodically soon after I realized my mistake. They are sitting around ready for me to sift through at some future time.</p><p>Unfortunately, now I&rsquo;m sort of treating logs like a read-only database, and I maybe could have just designed this in to my Postgres schema in the first place without taking much of a performance hit. You win some, you lose some.</p><h2 id=put-your-stuff-out-there>put your stuff out there</h2><p>The internet is cool and building dumb stuff is fun. Making for the web is also kind of terrifying, because it&rsquo;s probably going to be around for a long time. Once you unleash it, it&rsquo;s out there, ready for judgement and criticism. Write my name on it and people&rsquo;s negative reaction to it could be thinly veiled negative reactions to <span class=word-break>MeAndMyStupidDumbBrainWhyWouldIEvenTryToMakeAThingAnywayGahhhhhhh</span>.</p><p>I remember eagerly refreshing my first reddit submission for the site and it being downvoted to 0.</p><p>Then someone with a million twitter followers tweets it and getting 200k color judgements in a day.</p><p>Then I read harsh criticism of it on a french speaking early 2000&rsquo;s-looking forum.</p><p>Then a niche Italian art blog emails me asking for permission to write about it for an article.</p><p>Then I watch as no one engages with it at all for 10 sequential hours.</p><p>Then John Austin, whose <a href="https://www.youtube.com/watch?v=AS1OHMW873s">color theory talk</a> I reference in the <code>What?</code> section of the site, tells me the site reached him before I could tweet at him about it.</p><p>Wild ride, I&rsquo;ll tell ya!</p><h2 id=in-colorclusion>in colorclusion</h2><p>It was fun and worth it and I&rsquo;ll do it all again with something new! I may make a follow-up post at some point in the future once I parse through all the logs and make something pretty with them.</p></div></div><footer></footer></body></html>